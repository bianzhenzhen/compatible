{"remainingRequest":"D:\\jrxcs_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\jrxcs_vue\\src\\views\\compatible.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\jrxcs_vue\\src\\views\\compatible.vue","mtime":1551859904854},{"path":"D:\\jrxcs_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jrxcs_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\jrxcs_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jrxcs_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nconst form = {\r\n\tprojectId:'',\r\n\tsystemList:[],\r\n\tversion:'',\r\n\ttestCase:'',\r\n\tkick:'',\r\n\treceiveMail:'',\r\n\tmodelsRemark:''\r\n}\r\nexport default{\r\n\tname:'index',\r\n\tdata(){\r\n\t\treturn{\r\n\t\t\tcatalogId:this.$route.name,\r\n\t\t\tform:{...form},\r\n\t\t\tproject:[],\r\n\t\t\tsystem:[{\r\n\t\t\t\tindex:1,\r\n\t\t\t\ttext:'安卓'\r\n\t\t\t},{\r\n\t\t\t\tindex:2,\r\n\t\t\t\ttext:'IOS'\r\n\t\t\t}],\r\n\t\t\tfileList:[],\r\n\t\t\trules:{\r\n\t\t\t\tprojectId:[\r\n\t\t\t\t\t{required:true,message:'必填'}\r\n\t\t\t\t],\r\n\t\t\t\tversion:[\r\n\t\t\t\t\t{required:true,message:'必填'}\r\n\t\t\t\t],\r\n\t\t\t\treceiveMail:[\r\n\t\t\t\t\t{required:true,message:'必填'}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tmethods:{\r\n\t\texceed(files, fileList){\r\n\t\t\t// console.log(files, fileList)\r\n\t\t\tthis.$message.error(\"超出限制个数,请先删除列表已有的文件\");\r\n\t\t},\r\n\t\tsuccess(response, file, fileList){\r\n\t\t\t// console.log(response, file, fileList,\"success\")\r\n\t\t\tthis.testCase = '';\r\n\t\t\tconst {status, data} = response;\r\n\t\t\tif(!status){\r\n\t\t\t\tthis.$message.success(\"上传成功！\");\r\n\t\t\t\tthis.form.testCase = data.id;\r\n\t\t\t}else{\r\n\t\t\t\tthis.$message.error(data);\r\n\t\t\t\tthis.fileList = [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetCheckboxVal(labelArr){\r\n\t\t\tlet valArr = [];\r\n\t\t\tthis.system.forEach(item=>{\r\n\t\t\t\tlabelArr.forEach(item1=>{\r\n\t\t\t\t\tif(item.text == item1) {valArr.push(item.index)}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\treturn valArr\r\n\t\t},\r\n\t\tonSubmit(){\r\n\t\t\tthis.$refs.form.validate((valid,obj)=>{\r\n\t\t\t\tif(valid){\r\n\t\t\t\t\tconst systemList = this.getCheckboxVal(this.form.systemList);\r\n\t\t\t\t\tlet config = {\r\n\t\t\t\t\t    // headers: {'Content-Type': 'multipart/form-data;charset=UTF-8'} \r\n\t\t\t\t\t    // headers: {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'} \r\n\t\t\t\t\t}; //添加请求头\r\n\t\t\t\t\t// const testCase = this.fileList\r\n\t\t\t\t\tthis.$axios.post('/api/task/addTask',{...this.form,systemList,catalogId:this.catalogId})\r\n\t\t\t\t\t.then(res=>{\r\n\t\t\t\t\t\tconst {status, data} = res.data;\r\n\t\t\t\t\t\tif(!status){\r\n\t\t\t\t\t\t\tthis.$message.success(data);\r\n\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\tthis.$router.push(\"taskStatus\");\r\n\t\t\t\t\t\t\t},3000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tcancel(){\r\n\t\t\tthis.$refs.form.resetFields();\r\n\t\t\tthis.form = {...this.form}\r\n\t\t},\r\n\t\tgetProjectList(){\r\n\t\t\tconst userId = this.$common.getLocalStorage(\"user\",true).id;\r\n\t\t\tthis.$axios.post('/api/project/selectProject', {userId})\r\n\t\t\t.then((res)=>{\r\n\t\t\t\tconst {status, data} = res.data;\r\n\t\t\t\tif(!status){\r\n\t\t\t\t\tthis.project=[...data];\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tmounted(){\r\n\t\tthis.getProjectList();\r\n\t}\r\n}\r\n",{"version":3,"sources":["compatible.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"compatible.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div class=\"wrap\">\r\n\t\t<el-form ref=\"form\" :model=\"form\" label-width=\"140px\" :rules=\"rules\">\r\n\t\t  <el-form-item label=\"选择项目\" prop=\"projectId\">\r\n\t\t    <el-select v-model=\"form.projectId\" placeholder=\"请选择项目\">\r\n\t\t      <el-option :label=\"item.name\" :value=\"item.id\" v-for=\"item in project\"></el-option>\r\n\t\t    </el-select>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"系统选择\">\r\n\t\t    <el-checkbox-group v-model=\"form.systemList\">\r\n\t\t      <el-checkbox :label=\"item.text\" name=\"systemList\" v-for=\"item in system\" :key=\"item.index\"></el-checkbox>\r\n\t\t    </el-checkbox-group>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"版本\" prop=\"version\">\r\n\t\t    <el-input v-model=\"form.version\" placeholder=\"请填写版本\"></el-input>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"测试用例选择\">\r\n\t\t    <el-upload\r\n\t\t\t  class=\"upload-demo\"\r\n\t\t\t  action=\"/api/file/upload\"\r\n\t\t\t  multiple\r\n\t\t\t  :limit=\"1\"\r\n\t\t\t  :on-exceed=\"exceed\"\r\n\t\t\t  :on-success=\"success\"\r\n\t\t\t  :file-list=\"fileList\">\r\n\t\t\t  <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n\t\t\t  <div slot=\"tip\" class=\"el-upload__tip\">只能上传一个文件，且不超过10M</div>\r\n\t\t\t</el-upload>\r\n\t\t\t<div class=\"care\">*注：标准兼容性测试用例默认覆盖各1,2级页面，如有特殊需求请上传用例，如果没有请选择无</div>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"测试账号是否互踢\">\r\n\t\t    <el-select v-model=\"form.kick\" placeholder=\"请选择\">\r\n\t\t      <el-option label=\"是\" value=\"1\"></el-option>\r\n\t\t      <el-option label=\"否\" value=\"2\"></el-option>\r\n\t\t    </el-select>\r\n\t\t    <div class=\"care\">*注：如果账号存在互踢，请至少准备30个账号随测试用例上传</div>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"报告接收邮箱\" prop=\"receiveMail\">\r\n\t\t    <el-input v-model=\"form.receiveMail\"></el-input>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"机型备注\">\r\n\t\t    <el-input v-model=\"form.modelsRemark\" placeholder=\"默认IOS TOP50  安卓TOP250\"></el-input>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item>\r\n\t\t    <el-button type=\"primary\" @click=\"onSubmit\">确定</el-button>\r\n\t\t    <el-button @click=\"cancel\">取消</el-button>\r\n\t\t  </el-form-item>\r\n\t\t</el-form>\r\n\t</div>\r\n</template>\r\n<script>\r\nconst form = {\r\n\tprojectId:'',\r\n\tsystemList:[],\r\n\tversion:'',\r\n\ttestCase:'',\r\n\tkick:'',\r\n\treceiveMail:'',\r\n\tmodelsRemark:''\r\n}\r\nexport default{\r\n\tname:'index',\r\n\tdata(){\r\n\t\treturn{\r\n\t\t\tcatalogId:this.$route.name,\r\n\t\t\tform:{...form},\r\n\t\t\tproject:[],\r\n\t\t\tsystem:[{\r\n\t\t\t\tindex:1,\r\n\t\t\t\ttext:'安卓'\r\n\t\t\t},{\r\n\t\t\t\tindex:2,\r\n\t\t\t\ttext:'IOS'\r\n\t\t\t}],\r\n\t\t\tfileList:[],\r\n\t\t\trules:{\r\n\t\t\t\tprojectId:[\r\n\t\t\t\t\t{required:true,message:'必填'}\r\n\t\t\t\t],\r\n\t\t\t\tversion:[\r\n\t\t\t\t\t{required:true,message:'必填'}\r\n\t\t\t\t],\r\n\t\t\t\treceiveMail:[\r\n\t\t\t\t\t{required:true,message:'必填'}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tmethods:{\r\n\t\texceed(files, fileList){\r\n\t\t\t// console.log(files, fileList)\r\n\t\t\tthis.$message.error(\"超出限制个数,请先删除列表已有的文件\");\r\n\t\t},\r\n\t\tsuccess(response, file, fileList){\r\n\t\t\t// console.log(response, file, fileList,\"success\")\r\n\t\t\tthis.testCase = '';\r\n\t\t\tconst {status, data} = response;\r\n\t\t\tif(!status){\r\n\t\t\t\tthis.$message.success(\"上传成功！\");\r\n\t\t\t\tthis.form.testCase = data.id;\r\n\t\t\t}else{\r\n\t\t\t\tthis.$message.error(data);\r\n\t\t\t\tthis.fileList = [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetCheckboxVal(labelArr){\r\n\t\t\tlet valArr = [];\r\n\t\t\tthis.system.forEach(item=>{\r\n\t\t\t\tlabelArr.forEach(item1=>{\r\n\t\t\t\t\tif(item.text == item1) {valArr.push(item.index)}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\treturn valArr\r\n\t\t},\r\n\t\tonSubmit(){\r\n\t\t\tthis.$refs.form.validate((valid,obj)=>{\r\n\t\t\t\tif(valid){\r\n\t\t\t\t\tconst systemList = this.getCheckboxVal(this.form.systemList);\r\n\t\t\t\t\tlet config = {\r\n\t\t\t\t\t    // headers: {'Content-Type': 'multipart/form-data;charset=UTF-8'} \r\n\t\t\t\t\t    // headers: {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'} \r\n\t\t\t\t\t}; //添加请求头\r\n\t\t\t\t\t// const testCase = this.fileList\r\n\t\t\t\t\tthis.$axios.post('/api/task/addTask',{...this.form,systemList,catalogId:this.catalogId})\r\n\t\t\t\t\t.then(res=>{\r\n\t\t\t\t\t\tconst {status, data} = res.data;\r\n\t\t\t\t\t\tif(!status){\r\n\t\t\t\t\t\t\tthis.$message.success(data);\r\n\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\tthis.$router.push(\"taskStatus\");\r\n\t\t\t\t\t\t\t},3000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tcancel(){\r\n\t\t\tthis.$refs.form.resetFields();\r\n\t\t\tthis.form = {...this.form}\r\n\t\t},\r\n\t\tgetProjectList(){\r\n\t\t\tconst userId = this.$common.getLocalStorage(\"user\",true).id;\r\n\t\t\tthis.$axios.post('/api/project/selectProject', {userId})\r\n\t\t\t.then((res)=>{\r\n\t\t\t\tconst {status, data} = res.data;\r\n\t\t\t\tif(!status){\r\n\t\t\t\t\tthis.project=[...data];\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tmounted(){\r\n\t\tthis.getProjectList();\r\n\t}\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.fl{\r\n\tfloat:left;\r\n}\r\n.span-font{\r\n\tfont-size: 20px;\r\n    color:gray;\r\n}\r\n.wrap{\r\n\t@extend .span-font;\r\n\twidth: 70%;\r\n    text-align:left;\r\n    .care{\r\n    \tcolor: #c0c4cc;\r\n    }\r\n}\r\n\r\n</style>"]}]}