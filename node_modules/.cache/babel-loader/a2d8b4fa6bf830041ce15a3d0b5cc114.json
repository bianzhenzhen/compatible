{"remainingRequest":"D:\\jrxcs_vue\\node_modules\\babel-loader\\lib\\index.js!D:\\jrxcs_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\jrxcs_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\jrxcs_vue\\src\\views\\staffManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\jrxcs_vue\\src\\views\\staffManage.vue","mtime":1552553430723},{"path":"D:\\jrxcs_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jrxcs_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\jrxcs_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jrxcs_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport VPager from '@/components/common/vpager';\nimport { getUserInfo, deleteUser, updateUser } from '@/apis';\nvar form = {\n  accountName: '',\n  password: '',\n  status: ''\n};\nexport default {\n  name: 'taskStatus',\n  components: {\n    VPager: VPager\n  },\n  data: function data() {\n    return {\n      diaVisible: false,\n      params: {\n        accountName: '',\n        page: 1,\n        rows: 5\n      },\n      form: _objectSpread({}, form),\n      tableData: [],\n      pager: {\n        currentPage: 1,\n        pageSize: 5,\n        total: 0\n      },\n      ajaxParam: {\n        page: 1,\n        rows: 5\n      },\n      rules: {\n        accountName: {\n          required: true,\n          message: '必填'\n        },\n        password: {\n          required: true,\n          message: '必填'\n        },\n        status: {\n          required: true,\n          message: '必填'\n        }\n      }\n    };\n  },\n  methods: {\n    searchInfoFromName: function searchInfoFromName() {\n      this.params.page = 1;\n      this.params.rows = 5;\n      this.searchInfo();\n    },\n    searchInfo: function searchInfo() {\n      var _this = this;\n\n      getUserInfo(this.params, function (res) {\n        var _res$data = res.data,\n            status = _res$data.status,\n            data = _res$data.data;\n\n        if (!status) {\n          data.obj.forEach(function (item) {\n            item.statusText = item.status == \"1\" ? '有效' : '无效';\n            item.passwordEnter = '******';\n          });\n          _this.tableData = _toConsumableArray(data.obj);\n          _this.pager.currentPage = Number(data.page);\n          _this.pager.pageSize = Number(data.pageSize);\n          _this.pager.total = Number(data.totalNumber);\n        }\n      });\n    },\n    edit: function edit(index, row) {\n      var id = row.id,\n          accountName = row.accountName,\n          password = row.password,\n          status = row.status;\n      this.form = {\n        id: id,\n        accountName: accountName,\n        password: password,\n        status: status\n      };\n      this.diaVisible = true;\n\n      if (this.$refs.hasOwnProperty(\"form\")) {\n        this.$refs.form.resetFields();\n      }\n    },\n    inputFocus: function inputFocus() {\n      this.form.password = '';\n    },\n    del: function del(index, row) {\n      var _this2 = this;\n\n      this.visiblePop = false;\n      deleteUser({\n        id: row.id\n      }, function (res) {\n        var _res$data2 = res.data,\n            status = _res$data2.status,\n            data = _res$data2.data;\n\n        if (!status) {\n          _this2.$message.success(data);\n\n          _this2.searchInfo();\n        }\n      });\n    },\n    diaSure: function diaSure() {\n      var _this3 = this;\n\n      this.$refs.form.validate(function (valid, obj) {\n        if (valid) {\n          updateUser(_this3.form, function (res) {\n            var _res$data3 = res.data,\n                status = _res$data3.status,\n                data = _res$data3.data;\n\n            if (!status) {\n              _this3.$message.success(data);\n\n              _this3.searchInfo();\n\n              _this3.diaVisible = false;\n            }\n          });\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.searchInfo();\n  },\n  watch: {\n    \"pager\": {\n      handler: function handler(n, o) {\n        this.params.page = n.currentPage;\n        this.params.rows = n.pageSize;\n        this.searchInfo();\n      },\n      deep: true\n    }\n  }\n};",{"version":3,"sources":["staffManage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"wrap\">\r\n\t\t<div class=\"search\">\r\n\t\t\t<span>用户账号：</span><div class=\"input-style\"><el-input v-model=\"params.accountName\" placeholder=\"请输入内容\">\r\n\t\t\t\t<el-button slot=\"append\" @click=\"searchInfoFromName\">搜索</el-button>\r\n\t\t\t</el-input></div>\r\n\t\t</div>\r\n\t\t\r\n\t\t  <el-table\r\n\t\t    :data=\"tableData\"\r\n\t\t    stripe\r\n\t\t    border\r\n\t\t    style=\"width: 100%\">\r\n\t\t    <el-table-column\r\n\t\t      prop=\"accountName\"\r\n\t\t      label=\"用户名\">\r\n\t\t    </el-table-column>\r\n\t\t    <el-table-column\r\n\t\t      prop=\"passwordEnter\"\r\n\t\t      label=\"密码\">\r\n\t\t    </el-table-column>\r\n\t\t    <el-table-column\r\n\t\t      prop=\"statusText\"\r\n\t\t      label=\"状态\">\r\n\t\t    </el-table-column>\r\n\t\t    <el-table-column\r\n\t\t      prop=\"createAt\"\r\n\t\t      label=\"创建时间\">\r\n\t\t    </el-table-column>\r\n\t\t    <el-table-column\r\n\t\t      prop=\"updateAt\"\r\n\t\t      label=\"修改时间\">\r\n\t\t    </el-table-column>\r\n\t\t    <el-table-column\r\n\t\t      prop=\"operation\"\r\n\t\t      label=\"操作\">\r\n\t\t      \t<template slot-scope=\"scope\">\r\n\t\t\t        <el-button\r\n\t\t\t          @click.native.prevent=\"edit(scope.$index, scope.row)\"\r\n\t\t\t          type=\"primary\"\r\n\t\t\t          size=\"small\">\r\n\t\t\t          修改\r\n\t\t\t        </el-button>\r\n\t\t\t        <el-button\r\n\t\t\t        \t@click.native.prevent=\"del(scope.$index, scope.row)\"\r\n\t\t\t          \tsize=\"small\">\r\n\t\t\t          删除\r\n\t\t\t        </el-button>\r\n\r\n\t      \t\t</template>\r\n\t\t    </el-table-column>\r\n\t\t  </el-table>\r\n\t\t  <div class=\"pager\" v-if=\"pager.total\">\r\n\t\t  \t<v-pager v-model=\"pager\"></v-pager>\r\n\t\t  </div>\r\n\r\n\t\t  <el-dialog\r\n\t\t\t  :visible.sync=\"diaVisible\"\r\n\t\t\t  title=\"修改用户信息\"\r\n\t\t\t  width=\"50%\"\r\n\t\t\t  center>\r\n\t\t\t  <div>\r\n\t\t\t  \t<el-form ref=\"form\" :model=\"form\" label-width=\"110px\" :rules=\"rules\">\r\n\t\t\t\t  <el-form-item label=\"用户名：\" prop=\"accountName\">\r\n\t\t\t\t    <el-input v-model=\"form.accountName\" placeholder=\"请输入用户名\"></el-input>\r\n\t\t\t\t  </el-form-item>\r\n\t\t\t\t  <el-form-item label=\"密码：\" prop=\"password\">\r\n\t\t\t\t    <el-input type=\"password\" v-model=\"form.password\" placeholder=\"请输入密码\" @focus=\"form.password = ''\"></el-input>\r\n\t\t\t\t  </el-form-item>\r\n\t\t\t\t  <el-form-item label=\"状态：\" prop=\"status\">\r\n\t\t\t\t    <el-select v-model=\"form.status\" placeholder=\"请选择状态\">\r\n\t\t\t\t      <el-option label=\"无效\" value=\"0\"></el-option>\r\n\t\t\t\t      <el-option label=\"有效\" value=\"1\"></el-option>\r\n\t\t\t\t    </el-select>\r\n\t\t\t\t  </el-form-item>\r\n\t\t\t\t</el-form>\r\n\t\t\t  </div>\r\n\t\t\t  <span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t    <el-button type=\"primary\" @click=\"diaSure\">确 定</el-button>\r\n\t\t\t    <el-button @click=\"diaVisible = false\">取 消</el-button>\r\n\t\t\t  </span>\r\n\t\t  </el-dialog>\r\n\t\t  \r\n\t</div>\r\n</template>\r\n<script>\r\nimport VPager from '@/components/common/vpager'\r\nimport {getUserInfo, deleteUser, updateUser} from '@/apis'\r\nconst form = {\r\n\taccountName:'',\r\n\tpassword:'',\r\n\tstatus:''\r\n}\r\nexport default{\r\n\tname:'taskStatus',\r\n\tcomponents:{VPager},\r\n\tdata(){\r\n\t\treturn{\r\n\t\t\tdiaVisible:false,\r\n\t\t\tparams:{\r\n\t\t\t\taccountName:'',\r\n\t\t\t\tpage:1,\r\n\t\t\t\trows:5\r\n\t\t\t},\r\n\t\t\tform:{...form},\r\n\t\t\ttableData: [],\r\n\t        pager:{\r\n\t        \tcurrentPage:1,\r\n\t        \tpageSize:5,\r\n\t        \ttotal:0\r\n\t        },\r\n\t        ajaxParam:{\r\n\t        \tpage:1,\r\n\t        \trows:5\r\n\t        },\r\n\t        rules:{\r\n\t        \taccountName:{required:true,message:'必填'},\r\n\t\t\t\tpassword:{required:true,message:'必填'},\r\n\t\t\t\tstatus:{required:true,message:'必填'}\r\n\t        }\r\n\t\t}\r\n\t},\r\n\tmethods:{\r\n\t\tsearchInfoFromName(){\r\n\t\t\tthis.params.page =1;\r\n\t\t\tthis.params.rows =5;\r\n\t\t\tthis.searchInfo()\r\n\t\t},\r\n\t\tsearchInfo(){\r\n\t\t\tgetUserInfo(this.params,(res)=>{\r\n\t\t\t\tconst {status, data} = res.data;\r\n\t\t\t\tif(!status){\r\n\t\t\t\t\tdata.obj.forEach(item=>{\r\n\t\t\t\t\t\titem.statusText = item.status == \"1\" ? '有效' : '无效';\r\n\t\t\t\t\t\titem.passwordEnter = '******';\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.tableData = [...data.obj];\r\n\t\t\t\t\tthis.pager.currentPage = Number(data.page);\r\n\t\t\t\t\tthis.pager.pageSize = Number(data.pageSize);\r\n\t\t\t\t\tthis.pager.total = Number(data.totalNumber);\r\n\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tedit(index, row){\r\n\t\t\tconst {id, accountName, password, status} = row;\r\n\t\t\tthis.form = {id, accountName, password, status};\r\n\t\t\tthis.diaVisible = true;\r\n\t\t\tif(this.$refs.hasOwnProperty(\"form\")){\r\n\t\t\t\tthis.$refs.form.resetFields();\r\n\t\t\t}\r\n\t\t},\r\n\t\tinputFocus(){\r\n\t\t\tthis.form.password = '';\r\n\t\t},\r\n\t\tdel(index,row){\r\n\t\t\tthis.visiblePop = false;\r\n\t\t\tdeleteUser({id:row.id},(res)=>{\r\n\t\t\t\tconst {status, data} = res.data;\r\n\t\t\t\tif(!status){\r\n\t\t\t\t\tthis.$message.success(data);\r\n\t\t\t\t\tthis.searchInfo();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tdiaSure(){\r\n\t\t\tthis.$refs.form.validate( (valid, obj) => {\r\n\t\t\t\tif(valid){\r\n\t\t\t\t\tupdateUser(this.form, (res)=>{\r\n\t\t\t\t\t\tconst {status, data} = res.data;\r\n\t\t\t\t\t\tif(!status){\r\n\t\t\t\t\t\t\tthis.$message.success(data);\r\n\t\t\t\t\t\t\tthis.searchInfo();\r\n\t\t\t\t\t\t\tthis.diaVisible = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tmounted(){\r\n\t\tthis.searchInfo();\r\n\t},\r\n\twatch:{\r\n\t\t\"pager\":{\r\n\t\t\thandler(n,o){\r\n\t\t\t\tthis.params.page = n.currentPage;\r\n\t\t\t\tthis.params.rows = n.pageSize;\r\n\t\t\t\tthis.searchInfo();\r\n\t\t\t},\r\n\t\t\tdeep:true\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.search{\r\n\tmargin-bottom:30px;\r\n\t.input-style{\r\n\t\twidth: 300px;\r\n\t    display: inline-block;\r\n\t}\r\n\tspan{\r\n\t\tfont-size: 16px;\r\n\t    padding: 12px;\r\n\t}\r\n}\r\n\r\n.fl{\r\n\tfloat:left;\r\n}\r\n.span-font{\r\n\tfont-size: 20px;\r\n    color:gray;\r\n}\r\n.wrap{\r\n\t@extend .span-font;\r\n    text-align:left;\r\n    .pager{\r\n    \ttext-align:center;\r\n    \tmargin:20px 0;\r\n    }\r\n}\r\n\r\n</style>"],"sourceRoot":"src/views"}]}