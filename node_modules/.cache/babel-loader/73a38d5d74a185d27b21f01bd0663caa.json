{"remainingRequest":"D:\\jrxcs_vue\\node_modules\\babel-loader\\lib\\index.js!D:\\jrxcs_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\jrxcs_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\jrxcs_vue\\src\\views\\compatible.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\jrxcs_vue\\src\\views\\compatible.vue","mtime":1552273347409},{"path":"D:\\jrxcs_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jrxcs_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\jrxcs_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jrxcs_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"D:\\\\jrxcs_vue\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _objectSpread from \"D:\\\\jrxcs_vue\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar form = {\n  projectId: '',\n  systemList: [],\n  version: '',\n  testCase: '',\n  kick: '',\n  receiveMail: '',\n  modelsRemark: ''\n};\nexport default {\n  name: 'index',\n  data: function data() {\n    return {\n      catalogId: this.$route.name,\n      form: _objectSpread({}, form),\n      project: [],\n      system: [{\n        index: 1,\n        text: '安卓'\n      }, {\n        index: 2,\n        text: 'IOS'\n      }],\n      fileList: [],\n      rules: {\n        projectId: [{\n          required: true,\n          message: '必填'\n        }],\n        version: [{\n          required: true,\n          message: '必填'\n        }],\n        receiveMail: [{\n          required: true,\n          message: '必填'\n        }]\n      }\n    };\n  },\n  methods: {\n    exceed: function exceed(files, fileList) {\n      // console.log(files, fileList)\n      this.$message.error(\"超出限制个数,请先删除列表已有的文件\");\n    },\n    success: function success(response, file, fileList) {\n      // console.log(response, file, fileList,\"success\")\n      this.testCase = '';\n      var status = response.status,\n          data = response.data;\n\n      if (!status) {\n        this.$message.success(\"上传成功！\");\n        this.form.testCase = data.id;\n      } else {\n        this.$message.error(data);\n        this.fileList = [];\n      }\n    },\n    remove: function remove(files, fileList) {\n      this.testCase = '';\n      this.fileList = fileList;\n    },\n    getCheckboxVal: function getCheckboxVal(labelArr) {\n      var valArr = [];\n      this.system.forEach(function (item) {\n        labelArr.forEach(function (item1) {\n          if (item.text == item1) {\n            valArr.push(item.index);\n          }\n        });\n      });\n      return valArr;\n    },\n    onSubmit: function onSubmit() {\n      var _this = this;\n\n      this.$refs.form.validate(function (valid, obj) {\n        if (valid) {\n          if (!_this.form.testCase) {\n            _this.$message.error(\"测试用例必填！\");\n\n            return;\n          }\n\n          var systemList = _this.getCheckboxVal(_this.form.systemList);\n\n          var config = {// headers: {'Content-Type': 'multipart/form-data;charset=UTF-8'} \n            // headers: {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'} \n          }; //添加请求头\n          // const testCase = this.fileList\n\n          _this.$axios.post('/api/task/addTask', _objectSpread({}, _this.form, {\n            systemList: systemList,\n            catalogId: _this.catalogId\n          })).then(function (res) {\n            var _res$data = res.data,\n                status = _res$data.status,\n                data = _res$data.data;\n\n            if (!status) {\n              _this.$message.success(data);\n\n              setTimeout(function () {\n                _this.$router.push(\"taskStatus\");\n              }, 3000);\n            }\n          });\n        }\n      });\n    },\n    cancel: function cancel() {\n      this.$refs.form.resetFields();\n      this.form = _objectSpread({}, form);\n      this.fileList = [];\n    },\n    getProjectList: function getProjectList() {\n      var _this2 = this;\n\n      var userId = this.$common.getLocalStorage(\"user\", true).id;\n      this.$axios.post('/api/project/selectProject', {\n        userId: userId\n      }).then(function (res) {\n        var _res$data2 = res.data,\n            status = _res$data2.status,\n            data = _res$data2.data;\n\n        if (!status) {\n          _this2.project = _toConsumableArray(data);\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getProjectList();\n  }\n};",{"version":3,"sources":["compatible.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA,IAAA,IAAA,GAAA;AACA,EAAA,SAAA,EAAA,EADA;AAEA,EAAA,UAAA,EAAA,EAFA;AAGA,EAAA,OAAA,EAAA,EAHA;AAIA,EAAA,QAAA,EAAA,EAJA;AAKA,EAAA,IAAA,EAAA,EALA;AAMA,EAAA,WAAA,EAAA,EANA;AAOA,EAAA,YAAA,EAAA;AAPA,CAAA;AASA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,KAAA,MAAA,CAAA,IADA;AAEA,MAAA,IAAA,oBAAA,IAAA,CAFA;AAGA,MAAA,OAAA,EAAA,EAHA;AAIA,MAAA,MAAA,EAAA,CAAA;AACA,QAAA,KAAA,EAAA,CADA;AAEA,QAAA,IAAA,EAAA;AAFA,OAAA,EAGA;AACA,QAAA,KAAA,EAAA,CADA;AAEA,QAAA,IAAA,EAAA;AAFA,OAHA,CAJA;AAWA,MAAA,QAAA,EAAA,EAXA;AAYA,MAAA,KAAA,EAAA;AACA,QAAA,SAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,CADA;AAIA,QAAA,OAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,CAJA;AAOA,QAAA,WAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA;AAPA;AAZA,KAAA;AAwBA,GA3BA;AA4BA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,kBACA,KADA,EACA,QADA,EACA;AACA;AACA,WAAA,QAAA,CAAA,KAAA,CAAA,oBAAA;AACA,KAJA;AAKA,IAAA,OALA,mBAKA,QALA,EAKA,IALA,EAKA,QALA,EAKA;AACA;AACA,WAAA,QAAA,GAAA,EAAA;AAFA,UAGA,MAHA,GAGA,QAHA,CAGA,MAHA;AAAA,UAGA,IAHA,GAGA,QAHA,CAGA,IAHA;;AAIA,UAAA,CAAA,MAAA,EAAA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,OAAA;AACA,aAAA,IAAA,CAAA,QAAA,GAAA,IAAA,CAAA,EAAA;AACA,OAHA,MAGA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,IAAA;AACA,aAAA,QAAA,GAAA,EAAA;AACA;AACA,KAhBA;AAiBA,IAAA,MAjBA,kBAiBA,KAjBA,EAiBA,QAjBA,EAiBA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,WAAA,QAAA,GAAA,QAAA;AACA,KApBA;AAqBA,IAAA,cArBA,0BAqBA,QArBA,EAqBA;AACA,UAAA,MAAA,GAAA,EAAA;AACA,WAAA,MAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,QAAA,CAAA,OAAA,CAAA,UAAA,KAAA,EAAA;AACA,cAAA,IAAA,CAAA,IAAA,IAAA,KAAA,EAAA;AAAA,YAAA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AAAA;AACA,SAFA;AAGA,OAJA;AAKA,aAAA,MAAA;AACA,KA7BA;AA8BA,IAAA,QA9BA,sBA8BA;AAAA;;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,QAAA,CAAA,UAAA,KAAA,EAAA,GAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,cAAA,CAAA,KAAA,CAAA,IAAA,CAAA,QAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,SAAA;;AACA;AACA;;AACA,cAAA,UAAA,GAAA,KAAA,CAAA,cAAA,CAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;;AACA,cAAA,MAAA,GAAA,CACA;AACA;AAFA,WAAA,CANA,CASA;AACA;;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,mBAAA,oBAAA,KAAA,CAAA,IAAA;AAAA,YAAA,UAAA,EAAA,UAAA;AAAA,YAAA,SAAA,EAAA,KAAA,CAAA;AAAA,cACA,IADA,CACA,UAAA,GAAA,EAAA;AAAA,4BACA,GAAA,CAAA,IADA;AAAA,gBACA,MADA,aACA,MADA;AAAA,gBACA,IADA,aACA,IADA;;AAEA,gBAAA,CAAA,MAAA,EAAA;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,IAAA;;AACA,cAAA,UAAA,CAAA,YAAA;AACA,gBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,YAAA;AACA,eAFA,EAEA,IAFA,CAAA;AAGA;AACA,WATA;AAUA;AACA,OAvBA;AAwBA,KAvDA;AAwDA,IAAA,MAxDA,oBAwDA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,WAAA;AACA,WAAA,IAAA,qBAAA,IAAA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,KA5DA;AA6DA,IAAA,cA7DA,4BA6DA;AAAA;;AACA,UAAA,MAAA,GAAA,KAAA,OAAA,CAAA,eAAA,CAAA,MAAA,EAAA,IAAA,EAAA,EAAA;AACA,WAAA,MAAA,CAAA,IAAA,CAAA,4BAAA,EAAA;AAAA,QAAA,MAAA,EAAA;AAAA,OAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AAAA,yBACA,GAAA,CAAA,IADA;AAAA,YACA,MADA,cACA,MADA;AAAA,YACA,IADA,cACA,IADA;;AAEA,YAAA,CAAA,MAAA,EAAA;AACA,UAAA,MAAA,CAAA,OAAA,sBAAA,IAAA;AACA;AACA,OANA;AAOA;AAtEA,GA5BA;AAoGA,EAAA,OApGA,qBAoGA;AACA,SAAA,cAAA;AACA;AAtGA,CAAA","sourcesContent":["<template>\r\n\t<div class=\"wrap\">\r\n\t\t<el-form ref=\"form\" :model=\"form\" label-width=\"140px\" :rules=\"rules\">\r\n\t\t  <el-form-item label=\"选择项目\" prop=\"projectId\">\r\n\t\t    <el-select v-model=\"form.projectId\" placeholder=\"请选择项目\">\r\n\t\t      <el-option :label=\"item.name\" :value=\"item.id\" v-for=\"item in project\"></el-option>\r\n\t\t    </el-select>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"系统选择\">\r\n\t\t    <el-checkbox-group v-model=\"form.systemList\">\r\n\t\t      <el-checkbox :label=\"item.text\" name=\"systemList\" v-for=\"item in system\" :key=\"item.index\"></el-checkbox>\r\n\t\t    </el-checkbox-group>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"版本\" prop=\"version\">\r\n\t\t    <el-input v-model=\"form.version\" placeholder=\"请填写版本\"></el-input>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"测试用例选择\" required>\r\n\t\t    <el-upload\r\n\t\t\t  class=\"upload-demo\"\r\n\t\t\t  action=\"/api/file/upload\"\r\n\t\t\t  multiple\r\n\t\t\t  :limit=\"1\"\r\n\t\t\t  :on-exceed=\"exceed\"\r\n\t\t\t  :on-success=\"success\"\r\n\t\t\t  :on-remove=\"remove\"\r\n\t\t\t  :file-list=\"fileList\">\r\n\t\t\t  <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n\t\t\t  <div slot=\"tip\" class=\"el-upload__tip\">只能上传一个文件，且不超过20M</div>\r\n\t\t\t</el-upload>\r\n\t\t\t<div class=\"care\">*注：标准兼容性测试用例默认覆盖各1,2级页面，如有特殊需求请上传用例，如果没有请选择无</div>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"测试账号是否互踢\">\r\n\t\t    <el-select v-model=\"form.kick\" placeholder=\"请选择\">\r\n\t\t      <el-option label=\"是\" value=\"1\"></el-option>\r\n\t\t      <el-option label=\"否\" value=\"2\"></el-option>\r\n\t\t    </el-select>\r\n\t\t    <div class=\"care\">*注：如果账号存在互踢，请至少准备30个账号随测试用例上传</div>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"报告接收邮箱\" prop=\"receiveMail\">\r\n\t\t    <el-input v-model=\"form.receiveMail\"></el-input>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item label=\"机型备注\">\r\n\t\t    <el-input v-model=\"form.modelsRemark\" placeholder=\"默认IOS TOP50  安卓TOP250\"></el-input>\r\n\t\t  </el-form-item>\r\n\t\t  <el-form-item>\r\n\t\t    <el-button type=\"primary\" @click=\"onSubmit\">确定</el-button>\r\n\t\t    <el-button @click=\"cancel\">取消</el-button>\r\n\t\t  </el-form-item>\r\n\t\t</el-form>\r\n\t</div>\r\n</template>\r\n<script>\r\nconst form = {\r\n\tprojectId:'',\r\n\tsystemList:[],\r\n\tversion:'',\r\n\ttestCase:'',\r\n\tkick:'',\r\n\treceiveMail:'',\r\n\tmodelsRemark:''\r\n}\r\nexport default{\r\n\tname:'index',\r\n\tdata(){\r\n\t\treturn{\r\n\t\t\tcatalogId:this.$route.name,\r\n\t\t\tform:{...form},\r\n\t\t\tproject:[],\r\n\t\t\tsystem:[{\r\n\t\t\t\tindex:1,\r\n\t\t\t\ttext:'安卓'\r\n\t\t\t},{\r\n\t\t\t\tindex:2,\r\n\t\t\t\ttext:'IOS'\r\n\t\t\t}],\r\n\t\t\tfileList:[],\r\n\t\t\trules:{\r\n\t\t\t\tprojectId:[\r\n\t\t\t\t\t{required:true,message:'必填'}\r\n\t\t\t\t],\r\n\t\t\t\tversion:[\r\n\t\t\t\t\t{required:true,message:'必填'}\r\n\t\t\t\t],\r\n\t\t\t\treceiveMail:[\r\n\t\t\t\t\t{required:true,message:'必填'}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tmethods:{\r\n\t\texceed(files, fileList){\r\n\t\t\t// console.log(files, fileList)\r\n\t\t\tthis.$message.error(\"超出限制个数,请先删除列表已有的文件\");\r\n\t\t},\r\n\t\tsuccess(response, file, fileList){\r\n\t\t\t// console.log(response, file, fileList,\"success\")\r\n\t\t\tthis.testCase = '';\r\n\t\t\tconst {status, data} = response;\r\n\t\t\tif(!status){\r\n\t\t\t\tthis.$message.success(\"上传成功！\");\r\n\t\t\t\tthis.form.testCase = data.id;\r\n\t\t\t}else{\r\n\t\t\t\tthis.$message.error(data);\r\n\t\t\t\tthis.fileList = [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tremove(files, fileList){\r\n\t\t\tthis.testCase = '';\r\n\t\t\tthis.fileList = fileList;\r\n\t\t},\r\n\t\tgetCheckboxVal(labelArr){\r\n\t\t\tlet valArr = [];\r\n\t\t\tthis.system.forEach(item=>{\r\n\t\t\t\tlabelArr.forEach(item1=>{\r\n\t\t\t\t\tif(item.text == item1) {valArr.push(item.index)}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\treturn valArr\r\n\t\t},\r\n\t\tonSubmit(){\r\n\t\t\tthis.$refs.form.validate((valid,obj)=>{\r\n\t\t\t\tif(valid){\r\n\t\t\t\t\tif(!this.form.testCase) {\r\n\t\t\t\t\t\tthis.$message.error(\"测试用例必填！\")\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst systemList = this.getCheckboxVal(this.form.systemList);\r\n\t\t\t\t\tlet config = {\r\n\t\t\t\t\t    // headers: {'Content-Type': 'multipart/form-data;charset=UTF-8'} \r\n\t\t\t\t\t    // headers: {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'} \r\n\t\t\t\t\t}; //添加请求头\r\n\t\t\t\t\t// const testCase = this.fileList\r\n\t\t\t\t\tthis.$axios.post('/api/task/addTask',{...this.form,systemList,catalogId:this.catalogId})\r\n\t\t\t\t\t.then(res=>{\r\n\t\t\t\t\t\tconst {status, data} = res.data;\r\n\t\t\t\t\t\tif(!status){\r\n\t\t\t\t\t\t\tthis.$message.success(data);\r\n\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\tthis.$router.push(\"taskStatus\");\r\n\t\t\t\t\t\t\t},3000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tcancel(){\r\n\t\t\tthis.$refs.form.resetFields();\r\n\t\t\tthis.form = {...form};\r\n\t\t\tthis.fileList = [];\r\n\t\t},\r\n\t\tgetProjectList(){\r\n\t\t\tconst userId = this.$common.getLocalStorage(\"user\",true).id;\r\n\t\t\tthis.$axios.post('/api/project/selectProject', {userId})\r\n\t\t\t.then((res)=>{\r\n\t\t\t\tconst {status, data} = res.data;\r\n\t\t\t\tif(!status){\r\n\t\t\t\t\tthis.project=[...data];\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tmounted(){\r\n\t\tthis.getProjectList();\r\n\t}\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.fl{\r\n\tfloat:left;\r\n}\r\n.span-font{\r\n\tfont-size: 20px;\r\n    color:gray;\r\n}\r\n.wrap{\r\n\t@extend .span-font;\r\n\twidth: 70%;\r\n    text-align:left;\r\n    .care{\r\n    \tcolor: #c0c4cc;\r\n    }\r\n}\r\n\r\n</style>"],"sourceRoot":"src/views"}]}